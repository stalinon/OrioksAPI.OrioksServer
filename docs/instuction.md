# Инструкции для развертывания

Инструкция позволяет настроить приложение и развернуть локально или на сервере (во втором случае придется повозиться с Docker).
Для запуска необходимо поэтапно:

1. Настройка базы данных - описать файл `env/postgres.env` в следующем виде:

```env
# Пароль БД
POSTGRES_PASSWORD=password
# Название БД
POSTGRES_DB=database_name
# Директория хранилища
PGDATA=/var/lib/postgresql/data/pgdata
```

2. Настройка непосредственно приложения - описать файл `env/server.env`:

```env
# URL, на котором запустится приложение (в своем варианте рекомендуется менять только порт)
ASPNETCORE_URLS=http://0.0.0.0:5000
# Строка подключения к БД
CONNECTION_STRING=Host=localhost;Port=5432;Database=postgres;Password=qwerty;User ID=postgres;
```

`НА ЭТОМ ЭТАПЕ НАСТРОЙКА ДЛЯ ЛОКАЛЬНОЙ РАЗВЕРТКИ ГОТОВА`

3. Развертывание на сервере требует запуска docker-контейнера `postgres` на порте, совпадающем с портом, указанным в CONNECTION_STRING ранее, указать также `--env-file env/postgres.env` в качестве параметра.
4. Далее на локальной машине необходимо собрать docker-образ и запушить в DockerHub, запустив `scripts/dockerize.sh` так:

```bash
./scripts/dockerize.sh <login> <password> <image>
```

5. На сервере, после развертывания БД достаточно спуллить свой образ и запустить контейнер, указав `--env-file env/server.env` в качестве параметра.
